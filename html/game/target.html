<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	
	<link rel="stylesheet" type="text/css" href="../../css/stylesheet.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="../../css/pygment_trac.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="../../css/glowing.css" media="screen" />
	
	<title>Solomon's personal web page</title>
</head>
<body>

    <header>
		<div class="header-container">
			<hgroup>
				<h1>Solomon's personal web page</h1>
			</hgroup>
			<nav id="function-nav">
				<ul>
					<li id="blogs">Blogs</li><!-- home page -->
					<li id="profile">Profile</li><!-- include recent tasks and future life path/target -->
					<li id="portfolios">Portfolios</li>
					<li id="demos">Demos</li>
					<li id="contactme">Contact me</li>
					<li id="games"><a href="html/game/glowing.html">Games</a></li>
				</ul>
			</nav>
		</div>
    </header>
    <section class="body-container">
        <section id="main_content">
			<div class="counter" style="margin:auto; width:20%;">
				<label id="counterlabel" style="font-size:30px;">
				0
				</label>
			</div>
			<a href="glowing.html" style="margin-left:70%;">step 1</a>
			<div>
				<table class="glowing-puzzle-game">
					<tr>
						<td id="t11" class="white" data-r="1" data-c="1">0</td>
						<td id="t12" class="blue" data-r="1" data-c="2">2</td>
						<td id="t13" class="red" data-r="1" data-c="3">1</td>
						<td id="t14" class="blue" data-r="1" data-c="4">2</td>
					</tr>
					<tr>
						<td id="t21" class="blue" data-r="2" data-c="1">2</td>
						<td id="t22" class="red" data-r="2" data-c="2">1</td>
						<td id="t23" class="blue" data-r="2" data-c="3">2</td>
						<td id="t24" class="red" data-r="2" data-c="4">1</td>
					</tr>
					<tr>
						<td id="t31" class="red" data-r="3" data-c="1">1</td>
						<td id="t32" class="blue" data-r="3" data-c="2">2</td>
						<td id="t33" class="red" data-r="3" data-c="3">1</td>
						<td id="t34" class="blue" data-r="3" data-c="4">2</td>
					</tr>
					<tr>
						<td id="t41" class="blue" data-r="4" data-c="1">2</td>
						<td id="t42" class="red" data-r="4" data-c="2">1</td>
						<td id="t43" class="blue" data-r="4" data-c="3">2</td>
						<td id="t44" class="red" data-r="4" data-c="4">1</td>
					</tr>
				</table>
				
			</div>

        </section><!-- #main_content end -->

    </section>
      
    <footer></footer>
    <script type="application/javascript">
		var up="up";
		var down="down";
		var left="left";
		var right="right";
		var tds = document.querySelectorAll(".glowing-puzzle-game td");
		document.onkeydown = function(e){
			var whitepos = document.querySelector(".glowing-puzzle-game td.white");
			var canmove = false;
			switch(e.which){
				case 38:{//up
					e.preventDefault();
					canmove = canMove(whitepos, up);
					if(canmove){
						move(whitepos, up);
					}
					break;
				}
				case 40:{//down
					e.preventDefault();
					canmove = canMove(whitepos, down);
					if(canmove){
						move(whitepos, down);
					}
					break;
				}
				case 37:{//left
					e.preventDefault();
					canmove = canMove(whitepos, left);
					if(canmove){
						move(whitepos, left);
					}
					break;
				}
				case 39:{//right
					e.preventDefault();
					canmove = canMove(whitepos, right);
					if(canmove){
						move(whitepos, right);
					}
					break;
				}
			}
		}
		function canMove(whiteblock, direction){
			var canmove = false;
			switch(direction){
				case up:{
					canmove = whiteblock.dataset.r>1;
					break;
				}
				case down:{
					canmove = whiteblock.dataset.r<4;
					break;
				}
				case left:{
					canmove = whiteblock.dataset.c>1;
					if(canmove){
						var row=parseInt(whiteblock.dataset.r);
						var col=parseInt(whiteblock.dataset.c);
						var leftblock = document.querySelector("td#t"+row+(col-1));
						canmove = (leftblock.className != "red");
					}
					break;
				}
				case right:{
					canmove = whiteblock.dataset.c<4;
					break;
				}
			}
			return canmove;
		}
		function move(whiteblock, direction){
			console.log(direction);
			var row=parseInt(whiteblock.dataset.r);
			var col=parseInt(whiteblock.dataset.c);
			switch(direction){
				case up:{
					var upblock = document.querySelector("td#t"+(row-1)+col);
					switchBlock(whiteblock, upblock);
					break;
				}
				case down:{
					var downblock = document.querySelector("td#t"+(row+1)+col);
					switchBlock(whiteblock, downblock);
					break;
				}
				case left:{
					var leftblock = document.querySelector("td#t"+row+(col-1));
					switchBlock(whiteblock, leftblock);
					break;
				}
				case right:{
					var rightblock = document.querySelector("td#t"+row+(col+1));
					switchBlock(whiteblock, rightblock);
					break;
				}
			}
			var counter = parseInt(document.querySelector("#counterlabel").innerText);
			counter+=1;
			document.querySelector("#counterlabel").innerText=counter;
		}
		function switchBlock(block1, block2){
			var block2class=block2.classList[0];
			var block2value=block2.innerText;
			block2.className = block1.className;
			block2.innerText = block1.innerText;
			block1.className = block2class;
			block1.innerText = block2value;
		}
	</script>
    <script type="application/javascript" src="../../javascript/main.js"></script>

</body>
</html>